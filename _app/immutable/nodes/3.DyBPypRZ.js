import{R as n}from"../chunks/C0Ejmcij.js";import{b as i,S as o}from"../chunks/DjVlHYCf.js";import{p as c}from"../chunks/BjY27-vE.js";function l(t,e){throw new n(t,e.toString())}const f=!1,k=!0,s="ccported_tokens";async function d(){const t=i(c.url.origin);try{const e=await t.signinCallback(window.location.href),r={accessToken:e?.access_token,idToken:e?.id_token,refreshToken:e?.refresh_token,expiresAt:e?.expires_at?e.expires_at*1e3:void 0};try{localStorage.setItem(s,JSON.stringify(r))}catch(a){console.warn("[auth/callback] Failed to store tokens",a)}e?.profile&&(o.user=e.profile,o.loggedIn=!0)}catch(e){console.error("[auth/callback] signinCallback failed, trying signinRedirectCallback()",e);try{const r=await t.signinRedirectCallback?.(window.location.href),a={accessToken:r?.access_token,idToken:r?.id_token,refreshToken:r?.refresh_token,expiresAt:r?.expires_at?r.expires_at*1e3:void 0};localStorage.setItem(s,JSON.stringify(a)),r?.profile&&(o.user=r.profile,o.loggedIn=!0)}catch(r){console.error("[auth/callback] Redirect callback also failed",r)}}throw l(302,"/")}const _=Object.freeze(Object.defineProperty({__proto__:null,csr:k,load:d,ssr:f},Symbol.toStringTag,{value:"Module"}));export{_ as universal};
